<!DOCTYPE html>
<html>
<head>
    <title>IPL Sense</title>
    <style>
      body {
      background-image: url('https://hindi.sportzwiki.com/wp-content/uploads/2022/03/IPL-2022-1-1536x864.jpg');
      background-repeat: no-repeat;
      background-size: cover;
    }
    </style>
</head>
<body>
    <h1 style="color: White">IPL Sense</h1>
    <form method="post" action="/process">
        <label for="year" style="color: White">Year :</label>
        <select id="year" name="year" onchange="updateMatchOptions()">
            {% for id in years %}
            <option value="{{ id }}">{{ id }}</option>
            {% endfor %}
        </select>
        <br><br>
        <label for="match_id" style="color: White">Match ID :</label>
        <select id="match_id" name="match_id">
            {% for id in match_ids %}
            <option value="{{ id }}">{{ id }}</option>
            {% endfor %}
        </select>
        <br><br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>

<script>
    function updateMatchOptions() {
        var seriesId = document.getElementById("series_id").value;
        console.log(seriesId)
        // Make an AJAX request to retrieve the match_ids based on the selected series_id
        fetch(`/get_match_ids?series_id=${seriesId}`)
            .then(response => response.json())
            .then(matchIds => {
                var matchIdDropdown = document.getElementById("match_id");
                matchIdDropdown.innerHTML = "";

                for (var i = 0; i < matchIds.length; i++) {
                    var option = document.createElement("option");
                    option.text = matchIds[i];
                    option.value = matchIds[i];
                    matchIdDropdown.appendChild(option);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>
<!-- <link rel="script" href="/static/script.js">  -->